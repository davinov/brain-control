webpackJsonp([2],{0:function(e,t,n){e.exports=n("x35b")},G3BA:function(e,t){},UqZ0:function(e,t){},cQ3c:function(e,t){},ps32:function(e,t){},rZMD:function(e,t){},rbZG:function(e,t){},sa50:function(e,t,n){var r=n("puH/");e.exports=r({})},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("/5sW"),o=n("Z60a"),i=n.n(o),a=n("T/v0"),u=n.n(a),c=n("j/rp"),s=n.n(c),d=n("Oy1H"),f=n.n(d),l=n("EOM2"),p=n("rzQm"),h=n.n(p),v=(n("WpTh"),n("SldL"),n("C9uT")),m=n.n(v),g=(n("y9m4"),n("M4fF")),y=n.n(g),_=n("IQJA"),x=n("W+Sr"),b=n("8soT"),w=n("Q1TF"),P=n("lDdF"),T=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},k=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},M=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),m()(t,[{key:"lineForSerie",value:function(e){var t=this;return Object(b["b"])()(this.sessionData.map(function(n,r){return[t.xScale(r),t.yScale(n[e])]}))}},{key:"saveAsJSON",value:function(){var e=new Blob([JSON.stringify(this.sessionData,null,2)],{type:"application/json;charset=utf-8"}),t=new Date,n="muse-session-".concat(t.toISOString(),".json");Object(P["saveAs"])(e,n)}},{key:"series",get:function(){return Object.keys(this.sessionData[0]||{})}},{key:"xScale",get:function(){return Object(w["a"])().domain([0,this.sessionData.length-1]).range([0,this.width])}},{key:"yScale",get:function(){return Object(w["a"])().domain([0,.5]).range([this.height,0])}}]),t}(l["Vue"]);T([Object(l["Prop"])({default:[]}),k("design:type",Array)],M.prototype,"sessionData",void 0),T([Object(l["Prop"])({default:800}),k("design:type",Number)],M.prototype,"width",void 0),T([Object(l["Prop"])({default:500}),k("design:type",Number)],M.prototype,"height",void 0),M=T([l["Component"]],M);var E=M,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"muse-recorder__session"},[n("svg",{staticClass:"session__chart",attrs:{width:e.width,height:e.height}},e._l(e.series,function(t){return n("path",{key:t,class:["session__serie","session__serie--"+t.toLowerCase()],attrs:{d:e.lineForSerie(t)}})})),n("div",{staticClass:"session__legend"},e._l(e.series,function(t){return n("div",{key:t,class:["session__legend__item","session__legend__item--"+t.toLowerCase()]},[n("div",{staticClass:"session__legend__item__color"}),n("span",[e._v(e._s(t))])])})),n("button",{staticStyle:{flex:"none",height:"2em"},on:{click:function(t){e.saveAsJSON()}}},[e._v("\n    Export session to JSON file\n  ")])])},C=[],O=n("XyMi");function R(e){n("ps32")}var A=!1,F=R,D="data-v-fc1651c8",N=null,j=Object(O["a"])(E,S,C,A,F,D,N),B=j.exports,I=n("twHu"),U=n("V0Ox"),L=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},X=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},G=function(e){function t(){var e;return i()(this,t),e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments)),e.tk1=e.k1,e.tk2=e.k2,e.colors=["#00f","#0f0","#f00"],e}return s()(t,e),m()(t,[{key:"animateK1",value:function(e){var t=this,n=1e3,r=Date.now(),o=Object(I["b"])(this.tk1,e),i=function i(){var a=(Date.now()-r)/n;a>=1?t.tk1=e:(requestAnimationFrame(i),t.tk1=o(a))};i()}},{key:"animateK2",value:function(e){var t=this,n=1e3,r=Date.now(),o=Object(I["b"])(this.tk2,e),i=function i(){var a=(Date.now()-r)/n;a>=1?t.tk2=e:(requestAnimationFrame(i),t.tk2=o(a))};i()}},{key:"brainWires",value:function(e,t){var n=this;return[-.5,0,.5].map(function(r){return n.brainWire(e,t,r)})}},{key:"brainWire",value:function(e,t,n){var r=Object(b["b"])().curve(b["a"].tension(n));return r(this.wirePoints(e,t,n))}},{key:"wirePoints",value:function(e,t,n){var r=e+Object(U["a"])(n)*(t-e),o=[this.leftPoint(r,n),this.leftMiddlePoint(r,n),this.middlePoint(r,n),this.rightMiddlePoint(r,n),this.rightPoint(r,n)],i=100,a=o.map(function(e){return[e[0],e[1]+i/2]}).concat(o.reverse().map(function(e){return[e[0],-e[1]-i/2]}));return a.push(a[0]),a.map(this.verticalTranslation(-this.width/2-2*(1-Math.max(e,t))*n*this.radius))}},{key:"leftPoint",value:function(e,t){return[Object(I["b"])(-this.width/2,-this.radius)(Object(U["c"])(e)),Object(I["b"])(0,this.radius)(t*e)]}},{key:"leftMiddlePoint",value:function(e,t){var n=Object(I["b"])(Math.SQRT2/2,1);return[Object(I["b"])(-this.width/4,-this.radius*n(t))(Object(U["c"])(e)),Object(I["b"])(0,-this.radius*n(t))(Object(U["b"])(e))+Object(I["b"])(0,this.radius)(t*e)]}},{key:"middlePoint",value:function(e,t){return[0,Object(I["b"])(0,-this.radius)(Object(U["d"])(e))+Object(I["b"])(0,this.radius)(t*e)]}},{key:"rightMiddlePoint",value:function(e,t){return this.verticalSymetry(this.leftMiddlePoint(e,t))}},{key:"rightPoint",value:function(e,t){return this.verticalSymetry(this.leftPoint(e,t))}},{key:"verticalSymetry",value:function(e){return[-e[0],e[1]]}},{key:"horizontalSymetry",value:function(e){return[e[0],-e[1]]}},{key:"verticalTranslation",value:function(e){return function(t){return[t[0],e+t[1]]}}},{key:"originTranslation",get:function(){return"translate(".concat(this.width/2,", ").concat(this.height,")")}},{key:"radius",get:function(){return Math.sqrt(Math.pow(this.width/2,2)+Math.pow(this.height/2,2))/2}}]),t}(l["Vue"]);L([Object(l["Prop"])({default:1}),X("design:type",Number)],G.prototype,"k1",void 0),L([Object(l["Prop"])({default:1}),X("design:type",Number)],G.prototype,"k2",void 0),L([Object(l["Watch"])("k1"),X("design:type",Function),X("design:paramtypes",[Number]),X("design:returntype",void 0)],G.prototype,"animateK1",null),L([Object(l["Watch"])("k2"),X("design:type",Function),X("design:paramtypes",[Number]),X("design:returntype",void 0)],G.prototype,"animateK2",null),L([Object(l["Prop"])({default:800}),X("design:type",Number)],G.prototype,"height",void 0),L([Object(l["Prop"])({default:800}),X("design:type",Number)],G.prototype,"width",void 0),G=L([l["Component"]],G);var Y=G,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"brain-visualization",attrs:{height:e.height,width:e.width}},[n("defs",[n("filter",{attrs:{id:"goo"}},[n("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"10",result:"blur"}}),n("feColorMatrix",{attrs:{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -18",result:"goo"}}),n("feComposite",{attrs:{in:"SourceGraphic",in2:"goo",operator:"atop"}})],1)]),n("g",{staticClass:"brain-wires"},e._l(e.brainWires(e.tk1,e.tk2),function(t,r){return n("path",{key:r,staticClass:"brain-wire",attrs:{filter:"url(#goo)",transform:e.originTranslation,d:t,fill:e.colors[r]}})}))])},V=[];function W(e){n("rZMD")}var q=!1,H=W,Q="data-v-888b4562",Z=null,K=Object(O["a"])(Y,z,V,q,H,Q,Z),$=K.exports,J=(n("No4x"),n("Ml+6")),ee=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},te=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},ne=200,re={X:2*ne,Y:2*ne},oe=ne*Math.SQRT2,ie=1e3,ae=.001,ue=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),m()(t,[{key:"created",value:function(){this.scene=new J["j"],this.renderer=new J["n"]({preserveDrawingBuffer:!0}),this.renderer.autoClearColor=!1,this.camera=new J["f"](120,window.innerWidth/window.innerHeight,.1,1e3);var e=new J["d"]({color:0,transparent:!0,opacity:.04,depthWrite:!1}),t=new J["g"](1,1),n=new J["c"](t,e),r=new J["e"];r.add(this.camera),r.add(n),r.translateZ(ne),n.position.z=-.1,n.renderOrder=-1,this.scene.add(r);var o=new J["i"]({size:2,vertexColors:J["m"],opacity:.6,transparent:!0,map:this.createCanvasMaterial("white",64),depthWrite:!1});this.geometry=new J["b"],y.a.times(ie,this.addRandomPoint),this.points=new J["h"](this.geometry,o),this.scene.add(this.points)}},{key:"randomPositionOnPlane",value:function(){return new J["l"](2*(Math.random()-.5)*re.X,2*(Math.random()-.5)*re.Y,0)}},{key:"addRandomPoint",value:function(){this.geometry.vertices.push(this.randomPositionOnPlane()),this.geometry.colors.push(new J["a"](Math.random(),Math.random(),Math.random()))}},{key:"mounted",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.animate(),this.$el.appendChild(this.renderer.domElement)}},{key:"animate",value:function(){var e=this;this.geometry.vertices.map(function(t){if(Math.random()<=ae){var n=e.randomPositionOnPlane();t.set(n.x,n.y,n.z),e.geometry.verticesNeedUpdate=!0}}),y.a.isNaN(this.k1)||y.a.isNaN(this.k2)||(this.geometry.vertices.map(function(t){var n=e.horizontalMovement(t),r=e.circularMovement(t),o=e.squareMovement(t),i=function(t,n,r){return e.circleWeigth*n+e.squareWeigth*r+e.horizontalWeigth*t},a=[i(n[0],r[0],o[0]),i(n[1],r[1],o[1])];e.moveParticle(t,a)}),this.geometry.verticesNeedUpdate=!0),this.geometry.colors.map(function(e){var t,n,r;t=(Math.random()-.5)/5,n=(Math.random()-.5)/5,r=(Math.random()-.5)/5,e.add(new J["a"](t,n,r))}),this.geometry.colorsNeedUpdate=!0,this.renderer.render(this.scene,this.camera),this.continue()}},{key:"createCanvasMaterial",value:function(e,t){var n=document.createElement("canvas");n.width=n.height=t;var r=n.getContext("2d"),o=new J["k"](n);if(!r)return new J["k"];var i=t/2;return r.beginPath(),r.arc(i,i,i,0,2*Math.PI),r.closePath(),r.fillStyle=e,r.fill(),o.needsUpdate=!0,o}},{key:"moveParticle",value:function(e,t){e.x+=t[0],e.y+=t[1],e.x>re.X&&(e.x=-1*re.X),e.x<-1*re.X&&(e.x=re.X),e.y>re.Y&&(e.y=-1*re.Y),e.y<-1*re.Y&&(e.y=re.Y)}},{key:"horizontalMovement",value:function(e){return[1,Math.sin(e.x/16/Math.PI)/2]}},{key:"circularMovement",value:function(e){var t=Math.pow(Math.pow(e.x,2)+Math.pow(e.y,2),.5),n=Math.atan2(e.y,e.x),r=(oe-t)/250,o=2*Math.PI/2e3;return[r*Math.cos(n)-t*Math.sin(n)*o,r*Math.cos(n)+t*Math.cos(n)*o]}},{key:"squareMovement",value:function(e){var t,n,r=e.x,o=e.y;return r>=0?(n=1,o>=0?(o/(1-r),t=-1):(o/(r-1),t=1)):(n=-1,o>0?(o/(r+1),t=-1):(o/(-1-r),t=1)),[t,n]}},{key:"continue",value:function(){this.paused||(this.lastAnimationId=window.requestAnimationFrame(this.animate))}},{key:"pause",value:function(){this.lastAnimationId&&window.cancelAnimationFrame(this.lastAnimationId),this.lastAnimationId=void 0}},{key:"onPausedChanged",value:function(){this.paused?this.pause():this.continue()}},{key:"render",value:function(e){return e("div",{class:"brain-particles"})}},{key:"destroyed",value:function(){this.pause(),this.renderer.dispose(),this.geometry.dispose()}},{key:"horizontalWeigth",get:function(){return 1-Math.max(this.k1,this.k2)}},{key:"circleWeigth",get:function(){return this.k1+this.k2===0?0:this.k1}},{key:"squareWeigth",get:function(){return this.k1+this.k2===0?0:this.k2}}]),t}(l["Vue"]);ee([Object(l["Prop"])({required:!0}),te("design:type",Number)],ue.prototype,"k1",void 0),ee([Object(l["Prop"])({required:!0}),te("design:type",Number)],ue.prototype,"k2",void 0),ee([Object(l["Prop"])({default:!1}),te("design:type",Boolean)],ue.prototype,"paused",void 0),ee([Object(l["Watch"])("paused"),te("design:type",Function),te("design:paramtypes",[]),te("design:returntype",void 0)],ue.prototype,"onPausedChanged",null),ue=ee([l["Component"]],ue);var ce,se,de=ue;function fe(e){n("UqZ0")}var le=!1,pe=fe,he="data-v-2f884374",ve=null,me=Object(O["a"])(de,ce,se,le,pe,he,ve),ge=me.exports,ye=(n("yuXV"),n("altv"),n("dTzs"),n("EuXz"),n("TFWu"),{createTexture:be,bindFramebuffer:we,createProgram:Te,createBuffer:xe,bindAttribute:Pe,bindTexture:_e});function _e(e,t,n){e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t)}function xe(e,t){var n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),n}function be(e,t,n,r,o){var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),n instanceof Uint8Array?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,o,0,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.bindTexture(e.TEXTURE_2D,null),i}function we(e,t,n){e.bindFramebuffer(e.FRAMEBUFFER,t),n&&e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}function Pe(e,t,n,r){e.bindBuffer(e.ARRAY_BUFFER,t),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,r,e.FLOAT,!1,0,0)}function Te(e,t,n){var r=e.createProgram(),o=ke(e,e.VERTEX_SHADER,t),i=ke(e,e.FRAGMENT_SHADER,n);if(e.attachShader(r,o),e.attachShader(r,i),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(r));var a,u={program:r,unload:l},c=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(a=0;a<c;a++){var s=e.getActiveAttrib(r,a);u[s.name]=e.getAttribLocation(r,s.name)}var d=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(a=0;a<d;a++){var f=e.getActiveUniform(r,a);u[f.name]=e.getUniformLocation(r,f.name)}return u;function l(){e.deleteProgram(r)}}function ke(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(r));return r}var Me=n("sa50"),Ee=n.n(Me),Se=n("3zJd"),Ce=n.n(Se),Oe={UNIFORM:1,VELOCITY:2,ANGLE:3,CUSTOM:4};function Re(e){return"// p.x and p.y are current coordinates\n// v.x and v.y is a velocity at point p\nvec2 get_velocity(vec2 p) {\n  vec2 v = vec2(0., 0.);\n\n  // change this to get a new vector field\n  ".concat(e,"\n\n  return v;\n}")}function Ae(){return window.innerWidth<600}var Fe,De=Ce()({},{useSearch:!0,rewriteHashToSearch:!0}),Ne={},je=Re("v.x = 0.1 * p.y;\n  v.y = -0.2 * p.y;"),Be={timeStep:.01,dropProbability:.009,particleCount:1e4,fadeout:.998,colorMode:Oe.UNIFORM},Ie={collapsed:Ae()},Ue={settingsPanel:Ie,saveBBox:et,getBBox:$e,makeBBox:Je,getQS:function(){return De},saveCode:rt,getCode:tt,getDefaultCode:nt,getDropProbability:Ze,setDropProbability:Ke,getIntegrationTimeStep:He,setIntegrationTimeStep:Qe,getParticleCount:We,setParticleCount:qe,getFadeout:ze,setFadeout:Ve,getColorMode:Le,setColorMode:Xe,getColorFunction:Ge,setColorFunction:Ye};function Le(){var e=De.get("cm");return ot(e)?e:Be.colorMode}function Xe(e){ot(e)&&(Ne.cm=e)}function Ge(){var e=De.get("cf");return e||""}function Ye(e){Ne.cf=e}function ze(){var e=De.get("fo");return ot(e)?e:Be.fadeout}function Ve(e){ot(e)&&(Ne.fo=e)}function We(){var e=De.get("pc");return ot(e)?e:Be.particleCount}function qe(e){ot(e)&&(Ne.pc=e)}function He(){var e=De.get("dt");return ot(e)?e:Be.timeStep}function Qe(e){ot(e)&&(Ne.dt=e)}function Ze(){var e=De.get("dp");return ot(e)?e:Be.dropProbability}function Ke(e){ot(e)&&it(e,0,1)}function $e(){var e=De.get("cx"),t=De.get("cy"),n=De.get("w"),r=De.get("h");return Je(e,t,n,r)}function Je(e,t,n,r){var o=ot(e)&&ot(t)&&ot(n)&&ot(r);if(o){var i=n/2,a=r/2,u=1e4;return{minX:Math.round(u*(e-i))/u,maxX:Math.round(u*(e+i))/u,minY:Math.round(u*(t-a))/u,maxY:Math.round(u*(t+a))/u}}}function et(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e={cx:.5*(e.minX+e.maxX),cy:.5*(e.minY+e.maxY),w:e.maxX-e.minX,h:e.maxX-e.minX},e.w<=0||e.h<=0||(Ne.cx=e.cx,Ne.cy=e.cy,Ne.w=e.w,Ne.h=e.h,Fe?(clearTimeout(Fe),Fe=0):Fe=setTimeout(function(){Fe=0},300))}function tt(){var e=De.get("vf");if(e)return e;var t=De.get("code");return t?(e=Re(t),delete Ne.code,e):je}function nt(){return je}function rt(e){Ne.code=e}function ot(e){return Number.isFinite(e)}function it(e,t,n){return e<t?t:e>n?n:e}De.onChange(function(){Ee.a.fire("scene-ready",window.scene)});var at={dx:0,dy:0,scale:1};function ut(e){var t,n,r=e.gl,o=e.canvasRect,i={dx:0,dy:0,scale:1},a=null;f();var u=ye.createProgram(r,ct(),st()),c={fadeOutLastFrame:s,renderCurrentScreen:d,updateScreenTextures:f,boundingBoxUpdated:!1};return c;function s(){ye.bindFramebuffer(r,e.framebuffer,t),r.viewport(0,0,o.width,o.height),c.boundingBoxUpdated&&a?(i.dx=-(e.bbox.minX-a.minX)/(e.bbox.maxX-e.bbox.minX),i.dy=-(e.bbox.minY-a.minY)/(e.bbox.maxY-e.bbox.minY),i.scale=(e.bbox.maxX-e.bbox.minX)/(a.maxX-a.minX),p(n,e.fadeOpacity,i)):p(n,e.fadeOpacity,at)}function d(){ye.bindFramebuffer(r,null),l(),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.DST_ALPHA),r.clearColor(e.backgroundColor.r,e.backgroundColor.g,e.backgroundColor.b,e.backgroundColor.a),r.clear(r.COLOR_BUFFER_BIT),p(t,1,at),r.disable(r.BLEND);var o=n;n=t,t=o,c.boundingBoxUpdated=!1,window.audioTexture&&p(window.audioTexture,1,at)}function f(){var e=o.width,i=o.height,a=new Uint8Array(e*i*4);t&&r.deleteTexture(t),n&&r.deleteTexture(n),t=ye.createTexture(r,r.NEAREST,a,e,i),n=ye.createTexture(r,r.NEAREST,a,e,i)}function l(){a?(a.minX=e.bbox.minX,a.minY=e.bbox.minY,a.maxX=e.bbox.maxX,a.maxY=e.bbox.maxY):a={minX:e.bbox.minX,minY:e.bbox.minY,maxX:e.bbox.maxX,maxY:e.bbox.maxY}}function p(t,n,o){var i=u;r.useProgram(i.program),ye.bindAttribute(r,e.quadBuffer,i.a_pos,2),ye.bindTexture(r,t,e.screenTextureUnit),r.uniform1i(i.u_screen,e.screenTextureUnit),r.uniform1f(i.u_opacity_border,.02),r.uniform1f(i.u_opacity,n),r.uniform3f(i.u_transform,o.dx,o.dy,o.scale),r.drawArrays(r.TRIANGLES,0,6)}}function ct(){return"// screen program\nprecision highp float;\n\nattribute vec2 a_pos;\nvarying vec2 v_tex_pos;\nuniform vec3 u_transform;\n\nvoid main() {\n    v_tex_pos = a_pos;\n    vec2 pos = a_pos;\n\n    // This transformation tries to move texture (raster) to the approximate position\n    // of particles on the current frame. This is needed to avoid rendering artifacts\n    // during pan/zoom: https://computergraphics.stackexchange.com/questions/5754/fading-particles-and-transition\n\n    // PS: I must admit, I wrote this formula through sweat and tears, and\n    // I still have no idea why I don't need to apply (pos.y - 0.5) to Y coordinate.\n    // Is it because I use aspect ratio for bounding box?\n    pos.x = (pos.x - 0.5) / u_transform.z - u_transform.x + 0.5 * u_transform.z;\n    pos.y = pos.y / u_transform.z + u_transform.y;\n\n    pos = 1.0 - 2.0 * pos;\n    gl_Position = vec4(pos, 0, 1);\n}"}function st(){return"precision highp float;\nuniform sampler2D u_screen;\nuniform float u_opacity;\nuniform float u_opacity_border;\n\nvarying vec2 v_tex_pos;\n\nvoid main() {\n  vec2 p = 1.0 - v_tex_pos;\n  vec4 color = texture2D(u_screen, p);\n\n  gl_FragColor = vec4(floor(255.0 * color * u_opacity) / 255.0);\n}"}var dt="\nhighp float decodeFloatRGBA( vec4 v ) {\n  float a = floor(v.r * 255.0 + 0.5);\n  float b = floor(v.g * 255.0 + 0.5);\n  float c = floor(v.b * 255.0 + 0.5);\n  float d = floor(v.a * 255.0 + 0.5);\n\n  float exponent = a - 127.0;\n  float sign = 1.0 - mod(d, 2.0)*2.0;\n  float mantissa = float(a > 0.0)\n                  + b / 256.0\n                  + c / 65536.0\n                  + floor(d / 2.0) / 8388608.0;\n  return sign * mantissa * exp2(exponent);\n}\n",ft=dt,lt=function(){function e(){i()(this,e)}return m()(e,[{key:"getDefines",value:function(){return""}},{key:"getFunctions",value:function(){return""}},{key:"getMainBody",value:function(){return""}}]),e}(),pt="\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n",ht=pt;function vt(){return"uniform sampler2D input0;\nuniform sampler2D input1;"}var mt=function(e){function t(e){var n;return i()(this,t),n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.updateCode=e||"",n}return s()(t,e),m()(t,[{key:"setNewUpdateCode",value:function(e){this.updateCode=e}},{key:"getDefines",value:function(){return"\nuniform float frame;\nuniform vec4 cursor;\n// TODO: use inputN instead.\nuniform sampler2D u_audio;\n\n#define PI 3.1415926535897932384626433832795\n\n".concat(vt(),"\n")}},{key:"getFunctions",value:function(){return"\n    // pseudo-random generator\nconst vec3 rand_constants = vec3(12.9898, 78.233, 4375.85453);\nfloat rand(const vec2 co) {\n    float t = dot(rand_constants.xy, co);\n    return fract(sin(t) * (rand_constants.z + t));\n}\n\n".concat(ht,"\n\nvec2 rotate(vec2 p,float a) {\n\treturn cos(a)*p+sin(a)*vec2(p.y,-p.x);\n}\n\n// TODO: This will change. Don't use it.\nfloat audio(float index) {\n  float rgbI = floor(index/4.);\n  vec2 txPos = vec2(fract(rgbI / 5.), floor(rgbI / 5.) / 5.);\n  vec4 rgba = texture2D(u_audio, txPos);\n  \n  float offset = mod(index, 4.);\n  if (offset == 0.) return rgba[0];\n  if (offset == 1.) return rgba[1];\n  if (offset == 2.) return rgba[2];\n  return rgba[3];\n}\n\n").concat(this.updateCode?this.updateCode:"vec2 get_velocity(vec2 p) { return vec2(0.); }","\n  ")}}]),t}(lt),gt=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s()(t,e),m()(t,[{key:"getDefines",value:function(){return"\nuniform float u_h;\n"}},{key:"getFunctions",value:function(){return"\nvec2 rk4(const vec2 point) {\n  vec2 k1 = get_velocity( point );\n  vec2 k2 = get_velocity( point + k1 * u_h * 0.5);\n  vec2 k3 = get_velocity( point + k2 * u_h * 0.5);\n  vec2 k4 = get_velocity( point + k3 * u_h);\n\n  return k1 * u_h / 6. + k2 * u_h/3. + k3 * u_h/3. + k4 * u_h/6.;\n}"}},{key:"getMainBody",value:function(){return"\n  vec2 velocity = rk4(pos);\n"}}]),t}(lt);function yt(e,t,n){var r=new mt(t),o=new gt;return{getVariables:i,getMain:c,getMethods:a};function i(){return"\nuniform vec2 u_velocity_range;\nvarying vec4 v_particle_color;\n\n".concat(r.getDefines(),"\n").concat(o.getDefines(),"\n")}function a(){return"\n// https://github.com/hughsk/glsl-hsv2rgb\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\n".concat(r.getFunctions(),"\n").concat(o.getFunctions(),"\n").concat(u(),"\n")}function u(){if(e===Oe.UNIFORM)return"\nvec4 get_color(vec2 p) {\n  return vec4(0.302, 0.737, 0.788, 1.);\n}\n";if(e===Oe.VELOCITY)return n||"\n        vec4 get_color(vec2 p) {\n          vec2 velocity = get_velocity(p);\n          float speed = (length(velocity) - u_velocity_range[0])/(u_velocity_range[1] - u_velocity_range[0]);\n          float hue = 0.05 + (1. - speed) * 0.5;\n          return vec4(hsv2rgb(vec3(hue, 0.9, 1.)), 1.0);\n        }\n      ";if(e===Oe.CUSTOM){if(!n)throw new Error("color mode is set to custom, but no color function is specified");return n}return" \nvec4 get_color(vec2 p) {\n  vec2 velocity = get_velocity(p);\n  float speed = (atan(velocity.y, velocity.x) + PI)/(2.0 * PI);\n  return vec4(hsv2rgb(vec3(speed, 0.9, 1.)), 1.0);\n}\n"}function c(){return"  v_particle_color = get_color(v_particle_pos);"}}var _t=function(){function e(t){i()(this,e),this.colorMode=t.colorMode,this.colorFunction=t.colorFunction||""}return m()(e,[{key:"getFragmentShader",value:function(){return"precision highp float;\nvarying vec4 v_particle_color;\nvoid main() {\n  gl_FragColor = v_particle_color;\n}"}},{key:"getVertexShader",value:function(e){var t=wt(),n=yt(this.colorMode,e,this.colorFunction),r=[];xt(t,r),xt(n,r);var o=[];return bt(t,o),bt(n,o),"precision highp float;\nattribute float a_index;\nuniform float u_particles_res;\nuniform vec2 u_min;\nuniform vec2 u_max;\n\n".concat(t.getVariables()||"","\n").concat(n.getVariables(),"\n\n").concat(ft,"\n\n").concat(r.join("\n"),"\n\nvoid main() {\n  vec2 txPos = vec2(\n        fract(a_index / u_particles_res),\n        floor(a_index / u_particles_res) / u_particles_res);\n  gl_PointSize = 1.0;\n\n").concat(o.join("\n"),"\n\n  vec2 du = (u_max - u_min);\n  v_particle_pos = (v_particle_pos - u_min)/du;\n  gl_Position = vec4(2.0 * v_particle_pos.x - 1.0, (1. - 2. * (v_particle_pos.y)),  0., 1.);\n}")}}]),e}();function xt(e,t){e.getMethods&&t.push(e.getMethods())}function bt(e,t){e.getMain&&t.push(e.getMain())}function wt(){return{getVariables:e,getMain:t};function e(){return"\nuniform sampler2D u_particles_x;\nuniform sampler2D u_particles_y;\n    "}function t(){return"\n  vec2 v_particle_pos = vec2(\n    decodeFloatRGBA(texture2D(u_particles_x, txPos)),\n    decodeFloatRGBA(texture2D(u_particles_y, txPos))\n  );\n"}}var Pt="\nvec4 encodeFloatRGBA(highp float val) {\n    if (val == 0.0) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n    }\n\n    float mag = abs(val);\n    float exponent = floor(log2(mag));\n    // Correct log2 approximation errors.\n    exponent += float(exp2(exponent) <= mag / 2.0);\n    exponent -= float(exp2(exponent) > mag);\n\n    float mantissa;\n    if (exponent > 100.0) {\n        // Not sure why this needs to be done in two steps for the largest float to work.\n        // Best guess is the optimizer rewriting '/ exp2(e)' into '* exp2(-e)',\n        // but exp2(-128.0) is too small to represent.\n        mantissa = mag / 1024.0 / exp2(exponent - 10.0) - 1.0;\n    } else {\n        mantissa = mag / float(exp2(exponent)) - 1.0;\n    }\n\n    float a = exponent + 127.0;\n    mantissa *= 256.0;\n    float b = floor(mantissa);\n    mantissa -= b;\n    mantissa *= 256.0;\n    float c = floor(mantissa);\n    mantissa -= c;\n    mantissa *= 128.0;\n    float d = floor(mantissa) * 2.0 + float(val < 0.0);\n    return vec4(a, b, c, d) / 255.0;\n}\n",Tt=Pt,kt=function(e){function t(e){var n;return i()(this,t),n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.isDecode=e,n}return s()(t,e),m()(t,[{key:"getFunctions",value:function(){if(this.isDecode)return"\n    ".concat(Tt,"\n    ").concat(ft,"\n")}},{key:"getDefines",value:function(){if(this.isDecode)return"\nprecision highp float;\n\nuniform sampler2D u_particles_x;\nuniform sampler2D u_particles_y;\n\n// Which coordinate needs to be printed onto the texture\nuniform int u_out_coordinate;\n\nvarying vec2 v_tex_pos;\n"}},{key:"getMainBody",value:function(){return this.isDecode?"\n   vec2 pos = vec2(\n     decodeFloatRGBA(texture2D(u_particles_x, v_tex_pos)),\n     decodeFloatRGBA(texture2D(u_particles_y, v_tex_pos))\n   );\n":"\n    if (u_out_coordinate == 0) gl_FragColor = encodeFloatRGBA(newPos.x);\n    else if (u_out_coordinate == 1) gl_FragColor = encodeFloatRGBA(newPos.y);\n    else if (u_out_coordinate == 6) gl_FragColor = encodeFloatRGBA(get_velocity(pos).x);\n    else if (u_out_coordinate == 7) gl_FragColor = encodeFloatRGBA(get_velocity(pos).y);\n"}}]),t}(lt);function Mt(e){var t=[];return e.forEach(function(e){e.getDefines&&n(e.getDefines())}),e.forEach(function(e){e.getFunctions&&n(e.getFunctions())}),n("void main() {"),e.forEach(function(e){e.getMainBody&&n(e.getMainBody())}),n("}"),t.join("\n");function n(e){e&&t.push(e)}}var Et=function(e){function t(e){var n;return i()(this,t),n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n.decode=e&&e.decode,n.srcPosName=e&&e.posName||"pos",n}return s()(t,e),m()(t,[{key:"getDefines",value:function(){if(this.decode)return"\n  uniform vec2 u_min;\n  uniform vec2 u_max;\n"}},{key:"getMainBody",value:function(){return this.decode?"\n  // move particle position according to current transform\n  vec2 du = (u_max - u_min);\n  pos.x = ".concat(this.srcPosName,".x * du.x + u_min.x;\n  pos.y = ").concat(this.srcPosName,".y * du.y + u_min.y;\n"):"\n  pos.x = (".concat(this.srcPosName,".x - u_min.x)/du.x;\n  pos.y = (").concat(this.srcPosName,".y - u_min.y)/du.y;\n")}}]),t}(lt),St=function(){function e(t){i()(this,e),this.readStoredPosition=new kt(!0),this.udfVelocity=new mt,this.integratePositions=new gt,this.dropParticles=new Ct,this.writeComputedPosition=new kt(!1),this.panZoomDecode=new Et({decode:!0}),this.panZoomEncode=new Et({decode:!1}),this.colorMode=t&&t.colorMode}return m()(e,[{key:"setCustomVectorField",value:function(e){this.udfVelocity.setNewUpdateCode(e)}},{key:"getVertexShader",value:function(){return"precision highp float;\n\nattribute vec2 a_pos;\nvarying vec2 v_tex_pos;\nuniform vec2 u_min;\nuniform vec2 u_max;\n\nvoid main() {\n    v_tex_pos = a_pos;\n    gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n}"}},{key:"getFragmentShader",value:function(){var e=[this.readStoredPosition,this.dropParticles,this.udfVelocity,this.integratePositions,{getMainBody:function(){return"\n  vec2 newPos = pos + velocity;\n  "}},this.writeComputedPosition];return Mt(e)}}]),e}(),Ct=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),m()(t,[{key:"getDefines",value:function(){return"\nuniform float u_drop_rate;\nuniform float u_rand_seed;\nuniform vec2 u_min;\nuniform vec2 u_max;\n"}},{key:"getFunctions",value:function(){return"\n"}},{key:"getMainBody",value:function(){return"\n  // a random seed to use for the particle drop\n  vec2 seed = (pos + v_tex_pos) * u_rand_seed;\n  // drop rate is a chance a particle will restart at random position, to avoid degeneration\n  float drop = step(1.0 - u_drop_rate, rand(seed));\n\n  // TODO: This can be customized to produce various emitters\n  // random_pos is in range from 0..1, we move it to the bounding box:\n  vec2 random_pos = vec2(rand(seed + 1.9), rand(seed + 8.4)) * (u_max - u_min) + u_min;\n  pos = mix(pos, random_pos, drop);\n"}}]),t}(lt);n("N4KQ");function Ot(e,t,n){if(0==e)return t[n+0]=0,t[n+1]=0,t[n+2]=0,void(t[n+3]=0);var r,o=Math.abs(e),i=Math.floor(Math.log2(o));i+=At(i)<=o/2?1:0,i-=At(i)>o?1:0,r=i>100?o/1024/At(i-10)-1:o/At(i)-1;var a=i+127;r*=256;var u=Math.floor(r);r-=u,r*=256;var c=Math.floor(r);r-=c,r*=128;var s=2*Math.floor(r)+(e<0?1:0);t[n+0]=a,t[n+1]=u,t[n+2]=c,t[n+3]=s}function Rt(e,t,n,r){var o=Math.floor(e+.5),i=Math.floor(t+.5),a=Math.floor(n+.5),u=Math.floor(r+.5),c=o-127,s=1-u%2*2,d=(o>0?1:0)+i/256+a/65536+Math.floor(u/2)/8388608;return s*d*At(c)}function At(e){return Math.exp(e*Math.LN2)}function Ft(){var e,t,n={getMin:function(){return e},getMax:function(){return t},add:function(n){n<e&&(e=n),n>t&&(t=n)},reset:r};return n;function r(){e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY}}var Dt=6,Nt=7;function jt(e){var t,n,r,o,i,a,u,c=!0,s=e.gl,d=Ft();return f(),{updateCode:g,updateParticlesPositions:y,updateParticlesCount:m,setColorMinMax:v,requestSpeedUpdate:h,dispose:l};function f(){Ee.a.on("integration-timestep-changed",h),Ee.a.on("bbox-change",h),Ee.a.on("refresh-speed",h)}function l(){Ee.a.off("integration-timestep-changed",h),Ee.a.off("bbox-change",h),Ee.a.off("refresh-speed",h),p()}function p(){n&&s.deleteTexture(n),t&&s.deleteTexture(t)}function h(){o&&clearTimeout(o),o=setTimeout(function(){c=!0,o=0},50)}function v(e){s.uniform2f(e.u_velocity_range,d.getMin(),d.getMax())}function m(){p(),r=e.particleStateResolution,i=r*r,a=new Uint8Array(4*i),u=new Uint8Array(4*i),n=ye.createTexture(s,s.NEAREST,a,r,r),t=ye.createTexture(s,s.NEAREST,u,r,r),h()}function g(){h()}function y(o){c&&a&&u&&(c=!1,ye.bindFramebuffer(s,e.framebuffer,n),s.uniform1i(o.u_out_coordinate,Dt),s.drawArrays(s.TRIANGLES,0,6),s.readPixels(0,0,r,r,s.RGBA,s.UNSIGNED_BYTE,a),ye.bindFramebuffer(s,e.framebuffer,t),s.uniform1i(o.u_out_coordinate,Nt),s.drawArrays(s.TRIANGLES,0,6),s.readPixels(0,0,r,r,s.RGBA,s.UNSIGNED_BYTE,u),_())}function _(){d.reset();for(var e=0;e<u.length;e+=4){var t=Bt(a,e),n=Bt(u,e),r=Math.sqrt(t*t+n*n);d.add(r)}}}function Bt(e,t){return Rt(e[t+0],e[t+1],e[t+2],e[t+3])}function It(e,t,n){var r=t.map(function(t,r){var o={texture:ye.createTexture(e,e.NEAREST,t.particleState,n,n),index:r,name:t.name};return o});return{dispose:i,bindTextures:a,assignProgramUniforms:o,length:t.length,textures:r,get:function(e){return r[e]}};function o(t){r.forEach(function(n){e.uniform1i(t["u_particles_"+n.name],n.index)})}function i(){r.forEach(function(t){return e.deleteTexture(t.texture)})}function a(e,t){r.forEach(function(n){ye.bindTexture(e,n.texture,n.index),e.uniform1i(t["u_particles_"+n.name],n.index)})}}var Ut=new St;function Lt(e){var t,n,r,o,i,a=e.gl,u=jt(e);return Ee.a.on("vector-lines-request",l),{updateCode:c,updateParticlesPositions:f,updateParticlesCount:s,prepareToDraw:d};function c(t){Ut.setCustomVectorField(t);var n=Ut.getFragmentShader(),r=Ut.getVertexShader(),i=ye.createProgram(a,r,n);o&&o.unload(),o=i,e.colorMode===Oe.VELOCITY&&u.requestSpeedUpdate()}function s(o,i){r=e.particleStateResolution;var c=[{name:"x",particleState:o},{name:"y",particleState:i}];t&&t.dispose(),t=It(a,c,r),n&&n.dispose(),n=It(a,c,r),u.updateParticlesCount()}function d(n){var r=e.colorMode;r===Oe.VELOCITY&&u.setColorMinMax(n),t.bindTextures(a,n)}function f(){var c=o;a.useProgram(c.program),ye.bindAttribute(a,e.quadBuffer,c.a_pos,2),e.inputs.updateBindings(c),e.audioTexture&&(ye.bindTexture(a,e.audioTexture,5),a.uniform1i(c["u_audio"],5)),t.bindTextures(a,c),a.uniform1f(c.u_rand_seed,e.frameSeed),a.uniform1f(c.u_h,e.integrationTimeStep),a.uniform1f(c.frame,e.frame);var s=e.cursor;a.uniform4f(c.cursor,s.clickX,s.clickY,s.hoverX,s.hoverY);var d=e.bbox;a.uniform2f(c.u_min,d.minX,d.minY),a.uniform2f(c.u_max,d.maxX,d.maxY),a.uniform1f(c.u_drop_rate,e.dropProbability);for(var f=0;f<n.length;++f){var l=n.get(f);a.uniform1i(c.u_out_coordinate,f),ye.bindFramebuffer(a,e.framebuffer,l.texture),a.viewport(0,0,r,r),a.drawArrays(a.TRIANGLES,0,6)}e.colorMode===Oe.VELOCITY&&u.updateParticlesPositions(c),i&&(p(c),i=null);var h=t;t=n,n=h}function l(e){i=e}function p(t){var n=[{name:"x",particleState:i.x},{name:"y",particleState:i.y}],r=i.resolution,o=r*r,u=It(a,n,r),c=It(a,n,r);u.bindTextures(a,t);var s=c.get(0);a.uniform1i(t.u_out_coordinate,6),ye.bindFramebuffer(a,e.framebuffer,s.texture),a.viewport(0,0,r,r),a.drawArrays(a.TRIANGLES,0,6);var d=new Uint8Array(4*o);a.readPixels(0,0,r,r,a.RGBA,a.UNSIGNED_BYTE,d),a.uniform1i(t.u_out_coordinate,7),s=c.get(1),ye.bindFramebuffer(a,e.framebuffer,s.texture),a.viewport(0,0,r,r),a.drawArrays(a.TRIANGLES,0,6);var f=new Uint8Array(4*o);a.readPixels(0,0,r,r,a.RGBA,a.UNSIGNED_BYTE,f),c.dispose(),u.dispose();for(var l=Ft(),p=Ft(),h=new Float32Array(o),v=new Float32Array(o),m=0;m<f.length;m+=4){var g=m/4,y=Xt(d,m),_=Xt(f,m);h[g]=y,v[g]=_,l.add(y),p.add(_)}var x={xStats:l,yStats:p,decoded_velocity_x:h,decoded_velocity_y:v,resolution:r};Ee.a.fire("vector-line-ready",x)}}function Xt(e,t){return Rt(e[t+0],e[t+1],e[t+2],e[t+3])}var Gt={isAudioEnabled:!1,vectorLinesEnabled:!1,FREE_TEXTURE_UNIT:4,showBindings:Ue.getQS().get("showBindings")||!1},Yt=Gt,zt=Vt;function Vt(e){var t=e.gl,n=8,r=8,o=new Uint8Array(n*r*4),i=ye.createTexture(t,t.NEAREST,o,n,r),a=!1;return e.audioTexture=i,Ee.a.on("audio",s),{updateTextures:c,dispose:u};function u(){Ee.a.off("audio",s),t.deleteTexture(i)}function c(){if(a){a=!1;var e=5,n=5;t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,o),t.bindTexture(t.TEXTURE_2D,null)}}function s(e){o=e,a=!0}}function Wt(e){var t,n,r,o,i,a=e.gl,u="",c=Lt(e);return s(),{updateParticlesCount:h,updateParticlesPositions:f,drawParticles:v,updateCode:p,updateColorMode:l};function s(){d(),Yt.isAudioEnabled&&(o&&o.dispose(),o=zt(e))}function d(){i&&i.unload();var t=new _t(e),n=t.getVertexShader(u);i=ye.createProgram(a,n,t.getFragmentShader())}function f(){u&&(e.frame+=1,e.frameSeed=Math.random(),o&&o.updateTextures(),c.updateParticlesPositions())}function l(){d()}function p(t){e.frame=0,u=t,c.updateCode(t),d()}function h(){t=e.particleStateResolution,r=t*t;for(var o=new Float32Array(r),i=new Uint8Array(4*r),u=new Uint8Array(4*r),s=e.bbox.minX,d=e.bbox.minY,f=e.bbox.maxX-s,l=e.bbox.maxY-d,p=0;p<r;p++)Ot(Math.random()*f+s,i,4*p),Ot(Math.random()*l+d,u,4*p),o[p]=p;n&&a.deleteBuffer(n),n=ye.createBuffer(a,o),c.updateParticlesCount(i,u)}function v(){if(u){var o=i;a.useProgram(o.program),ye.bindAttribute(a,n,o.a_index,1),c.prepareToDraw(o),e.inputs.updateBindings(o),a.uniform1f(o.u_h,e.integrationTimeStep),a.uniform1f(o.frame,e.frame),a.uniform1f(o.u_particles_res,t);var s=e.bbox;a.uniform2f(o.u_min,s.minX,s.minY),a.uniform2f(o.u_max,s.maxX,s.maxY);var d=e.cursor;a.uniform4f(o.cursor,d.clickX,d.clickY,d.hoverX,d.hoverY),a.drawArrays(a.POINTS,0,r)}}}n("mJx5"),n("fx22"),n("MsuQ");function qt(e,t){return t||(t={}),new Promise(n);function n(n,r){var o=new XMLHttpRequest;function i(e){e.lengthComputable&&t.progress({loaded:e.loaded,total:e.total,percent:e.loaded/e.total})}function a(){if(200===o.status){var i=o.response;"json"===t.responseType&&"string"===typeof i&&(i=JSON.parse(i)),n(i)}else r("Unexpected status code ".concat(o.status," when calling ").concat(e))}function u(){r("Failed to download ".concat(e))}function c(){r("Cancelled download of ".concat(e))}"function"===typeof t.progress&&o.addEventListener("progress",i,!1),o.addEventListener("load",a,!1),o.addEventListener("error",u,!1),o.addEventListener("abort",c,!1),o.open("GET",e),t.responseType&&(o.responseType=t.responseType),o.send(null)}}var Ht=new Map;function Qt(e){if(!e)return Promise.reject("Missing link");var t=e.trim();if(!t)return Promise.reject("Missing link");var n=Ht.get(t);return n?Promise.resolve(n):qt(e).then(function(t){return Ht.set(e,t),t})}var Zt="#include ",Kt={code:""};function $t(e){if(!e)return new Promise(function(e){return e(Kt)});var t=Jt(e);return t.pending.length>0?Promise.all(t.pending).then(function(){return t}).catch(function(e){return{error:{error:e}}}):new Promise(function(e){return e(t)})}function Jt(e){var t=[],n=e.split("\n"),r=[],o=0;return n.forEach(function(e,t){o=t,e&&"#"===e[0]?(r.push(""),a(e)):r.push(e)}),{getCode:i,pending:t};function i(){return r.join("\n")}function a(e){if(0===e.indexOf(Zt)){var n=e.substr(Zt.length),i=o;t.push(Qt(n).then(function(e){r[i]=e}))}}}var en={check:function(e){return{code:e,log:{errorCount:0}}}};n.e(0).then(function(){en=n("TFw8"),Ee.a.fire("glsl-parser-ready")}.bind(null,n)).catch(n.oe);var tn="\nimport {\n  float PI;\n  float snoise(vec2 v);\n  float frame;\n  vec4 cursor;\n  vec2 rotate(vec2 p,float a);\n  float audio(float index);\n  float rand(const vec2 co);\n  sampler2D input0;\n  sampler2D input1;\n}";function nn(e){return $t(e).then(function(t){if(t.error)return t;e=t.getCode();var n=en.check(e,{globals:tn});return n.code=e,n.log.errorCount&&(n.error=rn(n.log)),n})}function rn(e){var t=e.diagnostics[0],n=t.range,r=n.lineColumn(),o=n.source,i=o._lineOffsets[r.line],a=o.contents.substr(i,r.column);a+=o.contents.substring(n.start,n.end);var u="Line "+r.line+": ",c=t.text;return{error:u+a+"\n"+an(u.length)+an(r.column)+"^",errorDetail:c,isFloatError:on(c)}}function on(e){return e.indexOf('"int"')>-1&&e.indexOf('"float"')>-1}function an(e){return new Array(e+1).join(" ")}function un(e){Ee.a.on("glsl-parser-ready",d);var t,n=0,r=Ue.getCode();s();var o={getCode:a,setCode:u,dispose:i,code:r,error:"",errorDetail:"",isFloatError:!1};return o;function i(){Ee.a.off("glsl-parser-ready",d)}function a(){return Ue.getCode()}function u(e){e!==r?f(e).then(function(t){if(!t.cancelled){if(t&&t.error)return c(t.error),t;r=e,o.code=e,Ue.saveCode(e)}}):t&&t.error&&d()}function c(e){e&&e.error?(o.error=e.error,o.errorDetail=e.errorDetail,o.isFloatError=e.isFloatError):(o.error="",o.errorDetail="",o.isFloatError=!1)}function s(){var e=Ue.getCode();e?f(e).then(function(e){e.error&&(console.error("Failed to restore previous vector field: ",e.error),f(Ue.getDefaultCode()))}):f(Ue.getDefaultCode())}function d(e){return nn(e||r).then(function(e){return t=e,c(t.error),t})}function f(t){n+=1;var r=n;return d(t).then(function(t){if(r!==n)return t.cancelled=!0,t;if(t.error)return t;try{return e.updateCode(t.code),t}catch(e){return{error:{error:e.message}}}})}}function cn(){var e,t=new Map;return{updateBindings:r,bindInput:n};function n(e,n){var r=t.get(e);r&&r.dispose(),t.set(e,n)}function r(n){e=n,t.forEach(o)}function o(t,n){t.updateBinding(e,n)}}function sn(e,t){var n,r,o=new Image;return o.crossOrigin="",o.onload=a,o.onerror=i,o.src=t,new Promise(function(e,t){n=e,r=t});function i(e){r(e)}function a(){var t=e.createTexture(),r=0,i=e.RGBA,a=e.RGBA,u=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,r,i,a,u,o),dn(o.width)&&dn(o.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),n(t)}}function dn(e){return 0==(e&e-1)}var fn=Yt.FREE_TEXTURE_UNIT;function ln(e,t,n){var r=null;return sn(e.gl,t).then(i).catch(o),{updateBinding:a,dispose:function(){e.gl.deleteTexture(r)}};function o(e){n&&n.error&&n.error(e)}function i(e){r=e,Ee.a.fire("refresh-speed"),n&&n.done&&n.done(t)}function a(t,n){if(r){var o=n+fn;ye.bindTexture(e.gl,r,o),e.gl.uniform1i(t["input".concat(n)],o)}}}function pn(e){e.inputs=cn();var t=[];i();var n={getInputs:r,addInput:o};return n;function r(){return t}function o(n){var r=hn(e,n);return t.push(r),r}function i(){var e=Ue.getQS().get("i0");if(e){var t=o(0);t.link=e,t.updateBinding(!0)}}}function hn(e,t){var n=null,r={link:"",error:null,name:"input".concat(t),updateBinding:o};return r;function o(e){n&&(clearTimeout(n),n=null),e?i():n=setTimeout(i,300)}function i(){r.error=null,n=null;var o=ln(e,r.link,{done:function(){Ue.getQS().set("i".concat(t),r.link)},error:function(e){r.error=e}});e.inputs.bindInput(0,o)}}var vn=1;function mn(e){return.004*e}function gn(e){return 1-.002*e}function yn(e){var t={width:0,height:0,top:0,left:0};S(window.innerWidth,window.innerHeight),window.addEventListener("resize",E,!0);var n=Ue.getBBox()||{},r={scale:.1,x:window.innerWidth/2,y:window.innerHeight/2},o=Ue.getParticleCount();e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST);var i,a,u={gl:e,bbox:n,canvasRect:t,inputs:null,framebuffer:e.createFramebuffer(),quadBuffer:ye.createBuffer(e,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])),colorMode:Ue.getColorMode(),colorFunction:Ue.getColorFunction(),screenTextureUnit:3,speed:vn,integrationTimeStep:mn(vn),dropProbability:Ue.getDropProbability(),frame:0,cursor:{clickX:0,clickY:0,hoverX:0,hoverY:0},particleStateResolution:0,fadeOpacity:gn(vn),backgroundColor:{r:0,g:0,b:0,a:1},audioTexture:null},c=!1,s=pn(u),d=ut(u),f=Wt(u),l=un(f);D(o);var p={start:O,stop:R,dispose:C,setPaused:x,getParticlesCount:P,setParticlesCount:T,setFadeOutSpeed:b,getFadeOutSpeed:w,setDropProbability:k,getDropProbability:M,getSpeed:y,setSpeed:_,setColorMode:h,getColorMode:v,setColorFunction:m,getColorFunction:g,vectorFieldEditorState:l,inputsModel:s,setBackgroundColor:B,getCanvasRect:function(){return t},getBoundingBox:function(){return u.bbox}};return N(),setTimeout(function(){Ee.a.fire("scene-ready",p)}),p;function h(e){var t=parseInt(e,10);u.colorMode=t,f.updateColorMode(t)}function v(){return u.colorMode}function m(e){u.colorFunction=e,f.updateColorMode(u.colorMode)}function g(){return u.colorFunction}function y(){return u.speed}function _(e){var t=parseFloat(e);Number.isFinite(t)&&(u.speed=t,u.integrationTimeStep=mn(speed),u.fadeOpacity=gn(speed),Ee.a.fire("integration-timestep-changed",u.integrationTimeStep))}function x(e){c=e,O()}function b(e){var t=parseFloat(e);Number.isFinite(t)&&(u.fadeOpacity=t,Ue.setFadeout(t))}function w(){return Ue.getFadeout()}function P(){return Ue.getParticleCount()}function T(e){Number.isFinite(e)&&e!==o&&(e<1||(D(e),o=e,Ue.setParticleCount(e)))}function k(e){var t=parseFloat(e);Number.isFinite(t)&&(Ue.setDropProbability(t),u.dropProbability=t)}function M(){return Ue.getDropProbability()}function E(){S(window.innerWidth,window.innerHeight),d.updateScreenTextures(),j()}function S(n,r){var o=Math.max(.02*n,30),i=Math.max(.02*r,30),a=n+2*o,u=r+2*i;t.width=window.devicePixelRatio*a,t.height=window.devicePixelRatio*u,t.top=-i,t.left=-o;var c=e.canvas;c.style.width=a+"px",c.style.height=u+"px",c.style.left=-o+"px",c.style.top=-i+"px",c.width=t.width,c.height=t.height}function C(){R(),window.removeEventListener("resize",E,!0),l.dispose()}function O(){i||c||(i=requestAnimationFrame(A),a=Date.now())}function R(){cancelAnimationFrame(i),i=0,a=void 0}function A(){if(i=0,a){var e=Date.now()-a,t=1e3/30/e,n=u.speed/Math.min(t,1);u.integrationTimeStep=mn(n),u.fadeOpacity=gn(n)}F(),O()}function F(){d.fadeOutLastFrame(),f.drawParticles(),d.renderCurrentScreen(),f.updateParticlesPositions()}function D(e){u.particleStateResolution=Math.ceil(Math.sqrt(e)),f.updateParticlesCount()}function N(){t.width,t.height,Math.PI,Math.E,Math.PI,Math.E;j()}function j(){d.boundingBoxUpdated=!0,r={scale:.1,x:window.innerWidth/2,y:window.innerHeight/2};var e=t.width,o=t.height;e/=window.devicePixelRatio,o/=window.devicePixelRatio;var i=f(0),a=l(0),u=f(e),c=l(o),s=1e4;function f(e){return(e-r.x)/r.scale}function l(e){return(e-r.y)/r.scale}n.minX=Math.round(s*i/e)/s,n.minY=Math.round(s*-a/e)/s,n.maxX=Math.round(s*u/e)/s,n.maxY=Math.round(s*-c/e)/s,Ee.a.fire("bbox-change",n)}function B(e){u.backgroundColor=e}}var _n=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xn=this&&this.__metadata||function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},bn=function(e){function t(){var e;return i()(this,t),e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments)),e.timeStep=.01,e.dropProbability=.009,e.fadeout=.998,e}return s()(t,e),m()(t,[{key:"mounted",value:function(){var e=this.$el,t={antialias:!0,alpha:!1},n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);this.scene=yn(n),this.scene.setParticlesCount(this.particleCount),this.scene.setBackgroundColor({r:.05,g:0,b:.1,a:1}),this.scene.setDropProbability(.001),this.updateVectorField(),this.updateColorFunction(),this.scene.setColorMode(Oe.VELOCITY),this.paused||this.scene.start()}},{key:"beforeDestroy",value:function(){this.scene.dispose(),this.$el.remove()}},{key:"formatNumberforGLSL",value:function(e){return y.a.isNaN(e)?"0.":e.toFixed(4)}},{key:"updateVectorField",value:function(){this.scene&&this.scene.vectorFieldEditorState.setCode(this.GLSLcode)}},{key:"updateColorFunction",value:function(){this.scene&&this.scene.setColorFunction(this.colorFunction)}},{key:"GLSLcodeUpdated",value:function(){this.updateVectorField()}},{key:"colorFunctionToUpdate",value:function(){this.updateColorFunction()}},{key:"togglePause",value:function(){this.scene&&this.scene[this.paused?"stop":"start"]()}},{key:"updateParticleCount",value:function(){this.scene&&this.scene.setParticlesCount(this.particleCount)}},{key:"render",value:function(e){return e("canvas",{class:"brain-particles"})}},{key:"particleCount",get:function(){return Math.max(500*this.n*Math.pow(window.devicePixelRatio,2),1)}},{key:"GLSLcode",get:function(){var e=[];if(e.push("v.x = 0.;"),e.push("v.y = 0.;"),e.push("float tau = acos(0.);"),e.push("float pi = tau / 2.;"),e.push("float l = length(p);"),this.k1>0){var t={x:"p.y",y:"-p.x"};e.push("v.x += pow(".concat(this.formatNumberforGLSL(this.k1),", 2.) * (").concat(t.x,") / pow(max(1., abs(3. * l) - 2. * tau), 3.);")),e.push("v.y += pow(".concat(this.formatNumberforGLSL(this.k1),", 2.) * (").concat(t.y,") / pow(max(1., abs(3. * l) - 2. * tau), 3.);"))}if(this.k2>0){var n={x:"sign(sin(p.y * 4.)) / 2. + (1. - ".concat(this.formatNumberforGLSL(this.k2),") * sin(p.y * 4.)"),y:"sign(-1. * sin(p.x * 4.)) / 2. - (1. - ".concat(this.formatNumberforGLSL(this.k2),") * sin(p.x * 4.)")};e.push("float d = (abs(p.x) + abs(p.y)) * 2. / 3.;"),e.push("if ( (d < tau) && (d > pi / 2.) ) {"),e.push("v.x += pow(".concat(this.formatNumberforGLSL(this.k2),", 3.) * (").concat(n.x,");")),e.push("v.y += pow(".concat(this.formatNumberforGLSL(this.k2),", 3.) * (").concat(n.y,");")),e.push("}")}var r=Math.pow((1-Math.max(this.k1,this.k2))*Math.pow(this.k1+this.k2,2),2);return e.push("v.x += ".concat(this.formatNumberforGLSL(r)," * p.x / pow(l, 2.);")),e.push("v.y += ".concat(this.formatNumberforGLSL(r)," * p.y / pow(l, 2.);")),e.push("v.x /= 2.;"),e.push("v.y /= 2.;"),"\n    vec2 get_velocity(vec2 p) {\n      vec2 v = vec2(0., 0.);\n\n      ".concat(e.join("\n"),"\n\n      return v;\n    }")}},{key:"colorFunction",get:function(){var e=Math.pow((this.k2-this.k1)/2+.5,2);return"\n      vec4 get_color(vec2 p) {\n        vec2 velocity = get_velocity(p);\n        float speed = (length(velocity) - u_velocity_range[0])/(u_velocity_range[1] - u_velocity_range[0]);\n        float hue = 0.05 + (1. - speed) * 0.5;\n        float hue1 = 1. - pow(hue, 3.) / 2. + 0.15;\n        float hue2 = .5 + pow(hue, 3.) / 2.;\n        hue = ".concat(this.formatNumberforGLSL(e)," * hue1 + (1. - ").concat(this.formatNumberforGLSL(e),") * hue2;\n        return vec4(hsv2rgb(vec3(hue, 0.9, 1.)), 1.0);\n      }")}}]),t}(l["Vue"]);_n([Object(l["Prop"])({required:!0}),xn("design:type",Number)],bn.prototype,"k1",void 0),_n([Object(l["Prop"])({required:!0}),xn("design:type",Number)],bn.prototype,"k2",void 0),_n([Object(l["Prop"])({required:!0}),xn("design:type",Number)],bn.prototype,"n",void 0),_n([Object(l["Prop"])({default:!1}),xn("design:type",Boolean)],bn.prototype,"paused",void 0),_n([Object(l["Watch"])("GLSLcode"),xn("design:type",Function),xn("design:paramtypes",[]),xn("design:returntype",void 0)],bn.prototype,"GLSLcodeUpdated",null),_n([Object(l["Watch"])("colorFunction"),xn("design:type",Function),xn("design:paramtypes",[]),xn("design:returntype",void 0)],bn.prototype,"colorFunctionToUpdate",null),_n([Object(l["Watch"])("paused"),xn("design:type",Function),xn("design:paramtypes",[]),xn("design:returntype",void 0)],bn.prototype,"togglePause",null),_n([Object(l["Watch"])("particleCount"),xn("design:type",Function),xn("design:paramtypes",[]),xn("design:returntype",void 0)],bn.prototype,"updateParticleCount",null),bn=_n([l["Component"]],bn);var wn,Pn,Tn=bn;function kn(e){n("cQ3c")}var Mn=!1,En=kn,Sn="data-v-ac54b8d6",Cn=null,On=Object(O["a"])(Tn,wn,Pn,Mn,En,Sn,Cn),Rn=On.exports,An=n("U0v6"),Fn=n.n(An),Dn=n("QxPg"),Nn=n("Os+h"),jn=n.n(Nn),Bn=n("fAhp"),In=n.n(Bn),Un=n("nIHM"),Ln=n.n(Un),Xn=n("T0ZZ"),Gn=n.n(Xn),Yn=n("gKoC"),zn=n.n(Yn),Vn=n("12ZA"),Wn=n.n(Vn),qn=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},Hn=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r["throw"](e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}c((r=r.apply(e,t||[])).next())})};Dn["default"].library.add(jn.a,In.a,Ln.a,Gn.a,zn.a,Wn.a);var Qn=function(e){function t(){var e;return i()(this,t),e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments)),e.connectionStatus=!1,e.sessionInProgress=!1,e.currentSession=[],e.k1=0,e.k2=0,e.n=0,e.paused=!0,e.sessionsDetailsOpened=!1,e}return s()(t,e),m()(t,[{key:"created",value:function(){this.museClient=new _["MuseClient"]}},{key:"connectToMuse",value:function(){return Hn(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.museClient.connect();case 2:return e.next=4,this.museClient.start();case 4:this.startSession(),this.museClient.connectionStatus.subscribe(function(e){return t.connectionStatus=e});case 6:case"end":return e.stop()}},e,this)}))}},{key:"startSession",value:function(){var e=this;this.currentSession=[],this.currentSessionSubscription=this.museClient.relativeBandPowers.pipe(Object(x["bufferCount"])(100,50),Object(x["map"])(function(e){return Object.keys(_["POWER_BANDS"]).map(function(t){return{band:_["POWER_BANDS"][t],power:e.map(function(e){var n=e.find(function(e){return e.band.id==_["POWER_BANDS"][t].id});return n?n.power:NaN}).reduce(function(e,t){return e+t},0)/e.length}})}),Object(x["map"])(function(e){var t={};return e.forEach(function(e){return t[e.band.id]=e.power}),t})).subscribe(function(t){e.currentSession.push(Object.freeze(t)),e.currentSession=y.a.takeRight(e.currentSession,100),e.n=Math.min(5*e.currentSession.length,100),e.k1=(t.ALPHA-Math.min.apply(Math,h()(e.currentSession.map(function(e){return e.ALPHA}))))/(Math.max.apply(Math,h()(e.currentSession.map(function(e){return e.ALPHA})))-Math.min.apply(Math,h()(e.currentSession.map(function(e){return e.ALPHA})))),e.k2=(t.GAMMA-Math.min.apply(Math,h()(e.currentSession.map(function(e){return e.GAMMA}))))/(Math.max.apply(Math,h()(e.currentSession.map(function(e){return e.GAMMA})))-Math.min.apply(Math,h()(e.currentSession.map(function(e){return e.GAMMA}))))}),this.sessionInProgress=!0,this.paused=!1}},{key:"stopSession",value:function(){this.currentSessionSubscription&&this.currentSessionSubscription.unsubscribe(),this.sessionInProgress=!1,this.paused=!0}},{key:"beforeDestroy",value:function(){this.stopSession()}}]),t}(l["Vue"]);Qn=qn([Object(l["Component"])({components:{Session:B,Visualization:$,ParticlesVisualization:ge,FieldVisualization:Rn,FontAwesomeIcon:Fn.a}})],Qn);var Zn=Qn,Kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"muse-recorder"},[n("div",[n("field-visualization",{attrs:{k1:e.k1,k2:e.k2,n:e.n,paused:e.paused}})],1),n("div",{staticClass:"muse-recorder__greeting",class:{"muse-recorder__greeting--connected":e.connectionStatus}},[n("div",{staticStyle:{"font-size":"6em"}},[e._v("Do you feel in control")]),n("div",{staticStyle:{"font-size":"4em"}},[e._v("of what's happenning")]),n("div",{staticStyle:{"font-size":"8em"}},[e._v("in your brain?")])]),n("div",{staticClass:"muse-recorder__connection",class:{"muse-recorder__connection--connected":e.connectionStatus}},[n("font-awesome-icon",{staticClass:"muse-recorder__connection-icon",attrs:{icon:["fab",e.connectionStatus?"bluetooth-b":"bluetooth"]},on:{click:function(t){e.connectionStatus?e.disconnect():e.connectToMuse()}}})],1),n("div",{staticClass:"muse-recorder__session-control"},[n("div",{staticClass:"muse-recorder__main-controls"},[n("font-awesome-icon",{staticClass:"muse-recorder__session-control-icon",attrs:{icon:["far",e.sessionInProgress?"pause-circle":"play-circle"]},on:{click:function(t){e.sessionInProgress?e.stopSession():e.startSession()}}}),n("font-awesome-icon",{staticClass:"muse-recorder__session-details-icon",attrs:{icon:["far",e.sessionsDetailsOpened?"caret-square-down":"caret-square-up"]},on:{click:function(t){e.sessionsDetailsOpened=!e.sessionsDetailsOpened}}})],1),e.sessionsDetailsOpened?n("div",{staticClass:"muse-recorder__session-details"},[n("div",{staticClass:"muse-recorder__viz-controls"},[n("button",{on:{click:function(t){e.paused=!e.paused}}},[e._v(" Pause viz\n        ")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.k1,expression:"k1",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"1",step:"0.01"},domProps:{value:e.k1},on:{__r:function(t){e.k1=e._n(t.target.value)},blur:function(t){e.$forceUpdate()}}}),n("pre",[e._v("k1: "+e._s(e.k1))]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.k2,expression:"k2",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"1",step:"0.01"},domProps:{value:e.k2},on:{__r:function(t){e.k2=e._n(t.target.value)},blur:function(t){e.$forceUpdate()}}}),n("pre",[e._v("k2: "+e._s(e.k2))]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.n,expression:"n",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"100",step:"1"},domProps:{value:e.n},on:{__r:function(t){e.n=e._n(t.target.value)},blur:function(t){e.$forceUpdate()}}}),n("pre",[e._v("n: "+e._s(e.n))])]),e.currentSession.length?n("Session",{attrs:{sessionData:e.currentSession}}):n("div",[e._v("\n        No session data\n      ")])],1):e._e()])])},$n=[];function Jn(e){n("rbZG")}var er=!1,tr=Jn,nr="data-v-33101aa1",rr=null,or=Object(O["a"])(Zn,Kn,$n,er,tr,nr,rr),ir=or.exports,ar=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":f()(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},ur=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),t}(l["Vue"]);ur=ar([Object(l["Component"])({components:{MuseRecorder:ir}})],ur);var cr=ur,sr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"muse-recorder-app"}},[n("MuseRecorder")],1)},dr=[];function fr(e){n("G3BA")}var lr=!1,pr=fr,hr=null,vr=null,mr=Object(O["a"])(cr,sr,dr,lr,pr,hr,vr),gr=mr.exports,yr=n("NYxO");r["default"].use(yr["a"]);var _r=new yr["a"].Store({state:{},mutations:{},actions:{}}),xr=n("ydGU");Object(xr["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["default"].config.productionTip=!1,new r["default"]({store:_r,render:function(e){return e(gr)}}).$mount("#app")}},[0]);
//# sourceMappingURL=app.e327be90.js.map